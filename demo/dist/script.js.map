{
  "version": 3,
  "sources": ["../../node_modules/@wxn0brp/db-string-query/dist/sql/utils.js", "../../node_modules/@wxn0brp/db-string-query/dist/sql/handle/collection.js", "../../node_modules/@wxn0brp/db-string-query/dist/sql/where.js", "../../node_modules/@wxn0brp/db-string-query/dist/sql/handle/delete.js", "../../node_modules/@wxn0brp/db-string-query/dist/sql/handle/insert.js", "../../node_modules/@wxn0brp/db-string-query/dist/sql/utils/join.util.js", "../../node_modules/@wxn0brp/db-string-query/dist/sql/handle/select.js", "../../node_modules/@wxn0brp/db-string-query/dist/sql/handle/update.js", "../../node_modules/@wxn0brp/db-string-query/dist/sql/index.js", "../../src/dbToVQL.ts", "../../src/utils.ts", "../../src/VQLR_to_VQLS.ts", "../../src/index.ts", "../script.ts"],
  "sourcesContent": [
    "export function parseReturn(method, args) {\n    return { method, args };\n}\nexport function parseSet(setString) {\n    return Object.fromEntries(setString.split(/\\s*,\\s*/).map(pair => {\n        const [key, value] = pair.split(/\\s*=\\s*/);\n        let parsedValue = value.replace(/^'|'$/g, \"\");\n        if (!isNaN(parsedValue))\n            parsedValue = Number(parsedValue);\n        return [key, parsedValue];\n    }));\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc3FsL3V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE1BQU0sVUFBVSxXQUFXLENBQUMsTUFBYyxFQUFFLElBQVc7SUFDbkQsT0FBTyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUM1QixDQUFDO0FBRUQsTUFBTSxVQUFVLFFBQVEsQ0FBQyxTQUFpQjtJQUN0QyxPQUFPLE1BQU0sQ0FBQyxXQUFXLENBQ3JCLFNBQVMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ2xDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQVEsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNoRCxJQUFJLFdBQVcsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUM5QyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQztZQUFFLFdBQVcsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsT0FBTyxDQUFDLEdBQUcsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUM5QixDQUFDLENBQUMsQ0FDTCxDQUFDO0FBQ04sQ0FBQyJ9",
    "import { parseReturn } from \"../utils.js\";\nexport function handleGet(query) {\n    if (!/^GET\\s+COLLECTIONS$/i.test(query)) {\n        throw new Error(\"Invalid GET COLLECTIONS syntax.\");\n    }\n    return parseReturn(\"getCollections\", []);\n}\nexport function handleCreate(query) {\n    const match = query.match(/^CREATE\\s+(?:TABLE|COLLECTION)\\s+(IF\\s+NOT\\s+EXISTS\\s+)?(\\w+).*/i);\n    if (!match)\n        throw new Error(\"Invalid CREATE TABLE/COLLECTION syntax.\");\n    return parseReturn(\"ensureCollection\", [match[2]]);\n}\nexport function handleDrop(query) {\n    const match = query.match(/^DROP\\s+(?:TABLE|COLLECTION)\\s+(?:IF\\s+EXISTS\\s+)?(\\w+)$/i);\n    if (!match)\n        throw new Error(\"Invalid DROP TABLE/COLLECTION syntax.\");\n    return parseReturn(\"removeCollection\", [match[1]]);\n}\nexport function handleExists(query) {\n    const match = query.match(/^EXISTS\\s+(?:TABLE|COLLECTION)\\s+(\\w+)$/i);\n    if (!match)\n        throw new Error(\"Invalid EXISTS TABLE/COLLECTION syntax.\");\n    return parseReturn(\"issetCollection\", [match[1]]);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGVjdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zcWwvaGFuZGxlL2NvbGxlY3Rpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUV2QyxNQUFNLFVBQVUsU0FBUyxDQUFDLEtBQWE7SUFDbkMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ3RDLE1BQU0sSUFBSSxLQUFLLENBQUMsaUNBQWlDLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBQ0QsT0FBTyxXQUFXLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDN0MsQ0FBQztBQUVELE1BQU0sVUFBVSxZQUFZLENBQUMsS0FBYTtJQUN0QyxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUNyQixrRUFBa0UsQ0FDckUsQ0FBQztJQUNGLElBQUksQ0FBQyxLQUFLO1FBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO0lBQ3ZFLE9BQU8sV0FBVyxDQUFDLGtCQUFrQixFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN2RCxDQUFDO0FBRUQsTUFBTSxVQUFVLFVBQVUsQ0FBQyxLQUFhO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsMkRBQTJELENBQUMsQ0FBQztJQUN2RixJQUFJLENBQUMsS0FBSztRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsdUNBQXVDLENBQUMsQ0FBQztJQUNyRSxPQUFPLFdBQVcsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdkQsQ0FBQztBQUVELE1BQU0sVUFBVSxZQUFZLENBQUMsS0FBYTtJQUN0QyxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLDBDQUEwQyxDQUFDLENBQUM7SUFDdEUsSUFBSSxDQUFDLEtBQUs7UUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7SUFDdkUsT0FBTyxXQUFXLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RELENBQUMifQ==",
    "const operators = {\n    \"=\": null,\n    \"<\": \"$lt\",\n    \">\": \"$gt\",\n    \"<=\": \"$lte\",\n    \">=\": \"$gte\",\n    \"!=\": \"$not\",\n    \"IN\": \"$in\",\n    \"NOT IN\": \"$nin\"\n};\nfunction mergeQueries(target, source) {\n    for (const key in source) {\n        if (key.startsWith('$')) {\n            // If the key is an operator, simply add it\n            target[key] = source[key];\n        }\n        else {\n            // If the key is a field, check if there is not already an operator in the target\n            if (target[key] !== undefined) {\n                // If target[key] is an object with an operator, merge the objects\n                if (typeof target[key] === 'object' && !Array.isArray(target[key])) {\n                    Object.assign(target[key], source[key]);\n                }\n                else {\n                    target[key] = source[key];\n                }\n            }\n            else {\n                target[key] = source[key];\n            }\n        }\n    }\n}\nexport function parseWhere(where) {\n    if (!where)\n        return {};\n    const trimmed = where.trim();\n    if (trimmed === \"\" || trimmed === \"1\")\n        return {};\n    // Tokenize the input string, handling parentheses and quoted values\n    const tokens = where\n        .replace(/\\s+(?=(?:[^'\"]*['\"][^'\"]*['\"])*[^'\"]*$)/g, \" \")\n        .match(/(?:\\(|\\)|'[^']*'|\"[^\"]*\"|[^\\s()'\"]+)/g) || [];\n    let frames = [];\n    let current = {};\n    let operatorStack = [];\n    let stack = [];\n    for (let i = 0; i < tokens.length; i++) {\n        let token = tokens[i].trim();\n        if (!token)\n            continue;\n        if (token === '(') {\n            // Push current context to the stack and reset for the new group\n            frames.push({ current, operatorStack, stack });\n            current = {};\n            operatorStack = [];\n            stack = [];\n        }\n        else if (token === ')') {\n            // Combine current and stack into a grouped query\n            let groupedQuery = current;\n            if (stack.length > 0) {\n                stack.push(current);\n                groupedQuery = { $or: stack };\n            }\n            if (frames.length === 0) {\n                throw new Error(\"Unmatched closing parenthesis\");\n            }\n            const parentFrame = frames.pop();\n            const parentCurrent = parentFrame.current;\n            const parentOperatorStack = parentFrame.operatorStack;\n            const parentStack = parentFrame.stack;\n            // Merge the grouped query into the parent context\n            if (parentOperatorStack.length > 0) {\n                const op = parentOperatorStack.pop();\n                if (op === \"OR\") {\n                    parentStack.push(parentCurrent);\n                    current = groupedQuery;\n                }\n                else if (op === \"AND\") {\n                    const newCurrent = {};\n                    mergeQueries(newCurrent, parentCurrent);\n                    mergeQueries(newCurrent, groupedQuery);\n                    current = newCurrent;\n                }\n            }\n            else {\n                const newCurrent = {};\n                mergeQueries(newCurrent, parentCurrent);\n                mergeQueries(newCurrent, groupedQuery);\n                current = newCurrent;\n            }\n            // Restore parent's stack and operator stack\n            operatorStack = parentFrame.operatorStack;\n            stack = parentFrame.stack;\n        }\n        else if (token.toUpperCase() === \"AND\" || token.toUpperCase() === \"OR\") {\n            operatorStack.push(token.toUpperCase());\n        }\n        else {\n            // Process condition (key, operator, value)\n            if (operatorStack.length) {\n                const op = operatorStack[operatorStack.length - 1];\n                if (op === \"OR\") {\n                    stack.push(current);\n                    current = {};\n                    operatorStack.pop();\n                }\n            }\n            let key = token;\n            if (key.includes(\".\")) {\n                key = key.split(\".\").pop();\n            }\n            let opToken = tokens[++i]?.trim();\n            let value = tokens[++i]?.trim();\n            if (!key || !opToken || value === undefined) {\n                throw new Error(`Invalid condition near '${key} ${opToken} ${value}'`);\n            }\n            // Handle quoted values\n            if ((value.startsWith(\"'\") && value.endsWith(\"'\")) || (value.startsWith('\"') && value.endsWith('\"'))) {\n                value = value.slice(1, -1);\n            }\n            // Parse numeric values\n            if (!isNaN(Number(value))) {\n                value = Number(value);\n            }\n            // Handle IN and NOT IN operations\n            if (opToken.toUpperCase() === \"IN\" || opToken.toUpperCase() === \"NOT IN\") {\n                if (!value.startsWith(\"(\") || !value.endsWith(\")\")) {\n                    throw new Error(`Invalid syntax for '${opToken}' near '${value}'`);\n                }\n                value = value.slice(1, -1).split(\",\").map((v) => {\n                    v = v.trim();\n                    if ((v.startsWith(\"'\") && v.endsWith(\"'\")) || (v.startsWith('\"') && v.endsWith('\"'))) {\n                        return v.slice(1, -1);\n                    }\n                    return isNaN(Number(v)) ? v : Number(v);\n                });\n            }\n            // Map the operator to the query operators\n            const mappedOp = operators[opToken.toUpperCase()];\n            if (mappedOp !== undefined) {\n                if (mappedOp === null) {\n                    // \"=\" operator - direct assignment\n                    current[key] = value;\n                }\n                else {\n                    // Other operators - they go to the root level\n                    if (!current[mappedOp]) {\n                        current[mappedOp] = {};\n                    }\n                    current[mappedOp][key] = value;\n                }\n            }\n            else {\n                // If operator not found, default to direct assignment\n                current[key] = value;\n            }\n        }\n    }\n    // Combine any remaining OR conditions\n    if (stack.length > 0) {\n        stack.push(current);\n        return { $or: stack };\n    }\n    return current;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2hlcmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc3FsL3doZXJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sU0FBUyxHQUEyQjtJQUN0QyxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxLQUFLO0lBQ1YsR0FBRyxFQUFFLEtBQUs7SUFDVixJQUFJLEVBQUUsTUFBTTtJQUNaLElBQUksRUFBRSxNQUFNO0lBQ1osSUFBSSxFQUFFLE1BQU07SUFDWixJQUFJLEVBQUUsS0FBSztJQUNYLFFBQVEsRUFBRSxNQUFNO0NBQ25CLENBQUM7QUFFRixTQUFTLFlBQVksQ0FBQyxNQUFtQixFQUFFLE1BQW1CO0lBQzFELEtBQUssTUFBTSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7UUFDdkIsSUFBSSxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDdEIsMkNBQTJDO1lBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDOUIsQ0FBQzthQUFNLENBQUM7WUFDSixpRkFBaUY7WUFDakYsSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssU0FBUyxFQUFFLENBQUM7Z0JBQzVCLGtFQUFrRTtnQkFDbEUsSUFBSSxPQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7b0JBQ2pFLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUM1QyxDQUFDO3FCQUFNLENBQUM7b0JBQ0osTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDOUIsQ0FBQztZQUNMLENBQUM7aUJBQU0sQ0FB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",
    "import { parseReturn } from \"../../sql/utils.js\";\nimport { parseWhere } from \"../../sql/where.js\";\nexport function handleDelete(query) {\n    const match = query.match(/DELETE FROM ([\\w\\/]+)(?: WHERE (.+))?/i);\n    if (!match)\n        throw new Error(\"Invalid DELETE syntax\");\n    const collection = match[1];\n    const whereClause = match[2] ? parseWhere(match[2]) : {};\n    return parseReturn(\"remove\", [collection, whereClause]);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVsZXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NxbC9oYW5kbGUvZGVsZXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDekMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLFlBQVksQ0FBQztBQUV4QyxNQUFNLFVBQVUsWUFBWSxDQUFDLEtBQWE7SUFDdEMsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDO0lBQ3BFLElBQUksQ0FBQyxLQUFLO1FBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0lBRXJELE1BQU0sVUFBVSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1QixNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRXpELE9BQU8sV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDLFVBQVUsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDO0FBQzVELENBQUMifQ==",
    "import { parseReturn } from \"../../sql/utils.js\";\nexport function handleInsert(query) {\n    const match = query.match(/INSERT INTO ([\\w\\/]+)\\s*\\(([^)]+)\\)\\s*VALUES\\s*\\(([^)]+)\\)/i);\n    if (!match)\n        throw new Error(\"Invalid INSERT syntax\");\n    const collection = match[1];\n    const keys = match[2].split(/\\s*,\\s*/);\n    function splitByCommasOutsideQuotes(str) {\n        const tokens = [];\n        let current = '';\n        let inSingleQuote = false;\n        let inDoubleQuote = false;\n        for (let i = 0; i < str.length; i++) {\n            const char = str[i];\n            if ((char === \"'\") && !inDoubleQuote) {\n                inSingleQuote = !inSingleQuote;\n                current += char;\n            }\n            else if (char === '\"' && !inSingleQuote) {\n                inDoubleQuote = !inDoubleQuote;\n                current += char;\n            }\n            else if (char === ',' && !inSingleQuote && !inDoubleQuote) {\n                tokens.push(current);\n                current = '';\n            }\n            else {\n                current += char;\n            }\n        }\n        tokens.push(current);\n        return tokens;\n    }\n    const rawValues = splitByCommasOutsideQuotes(match[3]);\n    const values = rawValues.map(v => {\n        v = v.trim();\n        if (v.length >= 2) {\n            if (v[0] === \"'\" && v[v.length - 1] === \"'\") {\n                v = v.substring(1, v.length - 1);\n            }\n            else if (v[0] === '\"' && v[v.length - 1] === '\"') {\n                v = v.substring(1, v.length - 1);\n            }\n        }\n        return v;\n    });\n    if (keys.length !== values.length)\n        throw new Error(\"Number of columns and values does not match\");\n    const data = Object.fromEntries(keys.map((k, i) => [k, isNaN(values[i]) ? values[i] : Number(values[i])]));\n    return parseReturn(\"add\", [collection, data]);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5zZXJ0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NxbC9oYW5kbGUvaW5zZXJ0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFFekMsTUFBTSxVQUFVLFlBQVksQ0FBQyxLQUFhO0lBQ3RDLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsNkRBQTZELENBQUMsQ0FBQztJQUN6RixJQUFJLENBQUMsS0FBSztRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUNyRCxNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDNUIsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUV2QyxTQUFTLDBCQUEwQixDQUFDLEdBQVc7UUFDM0MsTUFBTSxNQUFNLEdBQWEsRUFBRSxDQUFDO1FBQzVCLElBQUksT0FBTyxHQUFHLEVBQUUsQ0FBQztRQUNqQixJQUFJLGFBQWEsR0FBRyxLQUFLLENBQUM7UUFDMUIsSUFBSSxhQUFhLEdBQUcsS0FBSyxDQUFDO1FBRTFCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDbEMsTUFBTSxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLElBQUksQ0FBQyxJQUFJLEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztnQkFDbkMsYUFBYSxHQUFHLENBQUMsYUFBYSxDQUFDO2dCQUMvQixPQUFPLElBQUksSUFBSSxDQUFDO1lBQ3BCLENBQUM7aUJBQU0sSUFBSSxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7Z0JBQ3hDLGFBQWEsR0FBRyxDQUFDLGFBQWEsQ0FBQztnQkFDL0IsT0FBTyxJQUFJLElBQUksQ0FBQztZQUNwQixDQUFDO2lCQUFNLElBQUksSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLGFBQWEsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO2dCQUMxRCxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNyQixPQUFPLEdBQUcsRUFBRSxDQUFDO1lBQ2pCLENBQUM7aUJBQU0sQ0FBQztnQkFDSixPQUFPLElBQUksSUFBSSxDQUFDO1lBQ3BCLENBQUM7UUFDTCxDQUFDO1FBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNyQixPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBRUQsTUFBTSxTQUFTLEdBQUcsMEJBQTBCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdkQsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUM3QixDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2IsSUFBSSxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDO1lBQ2hCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztnQkFDMUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDckMsQ0FBQztpQkFBTSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7Z0JBQ2pELENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3JDLENBQUM7UUFDTCxDQUFDO1FBQ0QsT0FBTyxDQUFDLENBQUM7SUFDYixDQUFDLENBQUMsQ0FBQztJQUVILElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxNQUFNLENBQUMsTUFBTTtRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsNkNBQTZDLENBQUMsQ0FBQztJQUNsRyxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xILE9BQU8sV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ2xELENBQUMifQ==",
    "export class JoinToRelationsEngine {\n    defaultDbKey;\n    tableDbMap;\n    knownForeignKeys = new Set();\n    constructor(defaultDbKey, tableDbMap) {\n        this.defaultDbKey = defaultDbKey;\n        this.tableDbMap = tableDbMap;\n    }\n    identifyPkFk(left, right, mainTable, knownFks) {\n        const [leftTable, leftField] = left.split(\".\");\n        const [rightTable, rightField] = right.split(\".\");\n        if (leftTable === mainTable)\n            return { pk: left, fk: right };\n        else if (rightTable === mainTable)\n            return { pk: right, fk: left };\n        if (knownFks.has(left))\n            return { pk: right, fk: left };\n        else if (knownFks.has(right))\n            return { pk: left, fk: right };\n        // If either of the above conditions are met, use a heuristic: set pk to the field named \"id\" or \"_id\"\n        if (leftField === \"id\" || leftField === \"_id\") {\n            return { pk: left, fk: right };\n        }\n        else if (rightField === \"id\" || rightField === \"_id\") {\n            return { pk: right, fk: left };\n        }\n        // If still unsure, throw an error\n        throw new Error(`Cannot determine pk/fk from condition: \"${left} = ${right}\"`);\n    }\n    buildRelations(joinClauses, mainTable) {\n        const relations = {};\n        const knownFks = new Set(this.knownForeignKeys);\n        for (const [alias, condition] of Object.entries(joinClauses)) {\n            const [left, right] = condition.split(/\\s*=\\s*/);\n            const { pk, fk } = this.identifyPkFk(left, right, mainTable, knownFks);\n            const [pkTable, pkField] = pk.split(\".\");\n            const [fkTable, fkField] = fk.split(\".\");\n            knownFks.add(fk);\n            const dbKey = this.tableDbMap?.[fkTable] || this.defaultDbKey;\n            relations[alias] = {\n                type: \"1n\",\n                path: [dbKey, fkTable],\n                pk: pkField,\n                fk: fkField,\n                as: alias,\n            };\n        }\n        this.knownForeignKeys = knownFks;\n        return relations;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiam9pbi51dGlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NxbC91dGlscy9qb2luLnV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsTUFBTSxPQUFPLHFCQUFxQjtJQUlsQjtJQUNBO0lBSkosZ0JBQWdCLEdBQWdCLElBQUksR0FBRyxFQUFFLENBQUM7SUFFbEQsWUFDWSxZQUFvQixFQUNwQixVQUFtQztRQURuQyxpQkFBWSxHQUFaLFlBQVksQ0FBUTtRQUNwQixlQUFVLEdBQVYsVUFBVSxDQUF5QjtJQUMzQyxDQUFDO0lBRUcsWUFBWSxDQUFDLElBQVksRUFBRSxLQUFhLEVBQUUsU0FBaUIsRUFBRSxRQUFxQjtRQUN0RixNQUFNLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDL0MsTUFBTSxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRWxELElBQUksU0FBUyxLQUFLLFNBQVM7WUFDdkIsT0FBTyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDO2FBQzlCLElBQUksVUFBVSxLQUFLLFNBQVM7WUFDN0IsT0FBTyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDO1FBRW5DLElBQUksUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUM7WUFDbEIsT0FBTyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDO2FBQzlCLElBQUksUUFBUSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUM7WUFDeEIsT0FBTyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDO1FBRW5DLHNHQUFzRztRQUN0RyxJQUFJLFNBQVMsS0FBSyxJQUFJLElBQUksU0FBUyxLQUFLLEtBQUssRUFBRSxDQUFDO1lBQzVDLE9BQU8sRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQztRQUNuQyxDQUFDO2FBQU0sSUFBSSxVQUFVLEtBQUssSUFBSSxJQUFJLFVBQVUsS0FBSyxLQUFLLEVBQUUsQ0FBQztZQUNyRCxPQUFPLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUM7UUFDbkMsQ0FBQztRQUVELGtDQUFrQztRQUNsQyxNQUFNLElBQUksS0FBSyxDQUFDLDJDQUEyQyxJQUFJLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBQztJQUNuRixDQUFDO0lBRU0sY0FBYyxDQUNqQixXQUF1QixFQUN2QixTQUFpQjtRQUVqQixNQUFNLFNBQVMsR0FBMkIsRUFBRSxDQUFDO1FBQzdDLE1BQU0sUUFBUSxHQUFHLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBRWhELEtBQUssTUFBTSxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUM7WUFDM0QsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBRWpELE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUV2RSxNQUFNLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDekMsTUFBTSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRXpDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFakIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUM7WUFFOUQsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHO2dCQUNmLElBQUksRUFBRSxJQUFJO2dCQUNWLElBQUksRUFBRSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUM7Z0JBQ3RCLEVBQUUsRUFBRSxPQUFPO2dCQUNYLEVBQUUsRUFBRSxPQUFPO2dCQUNYLEVBQUUsRUFBRSxLQUFLO2FBQ1osQ0FBQztRQUNOLENBQUM7UUFFRCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDO1FBRWpDLE9BQU8sU0FBUyxDQUFDO0lBQ3JCLENBQUM7Q0FDSiJ9",
    "import { parseReturn } from \"../../sql/utils.js\";\nimport { parseWhere } from \"../../sql/where.js\";\nimport { JoinToRelationsEngine } from \"../utils/join.util.js\";\nexport function handleSelect(query, opts) {\n    let whereClauseStr;\n    let mainQueryPart = query;\n    const whereIndex = query.toUpperCase().lastIndexOf(\" WHERE \");\n    if (whereIndex !== -1) {\n        whereClauseStr = query.substring(whereIndex + 7).trim();\n        mainQueryPart = query.substring(0, whereIndex);\n    }\n    const match = mainQueryPart.match(/SELECT\\s+(.+?)\\s+FROM\\s+([\\w\\/]+)((?:\\s+JOIN\\s+.+)*)?/i);\n    if (!match)\n        throw new Error(\"Invalid SELECT syntax\");\n    const columnsPart = match[1].trim();\n    const collection = match[2];\n    const joinPart = match[3] || \"\";\n    const whereClause = whereClauseStr ? parseWhere(whereClauseStr) : {};\n    const findOpts = parseSelectClause(columnsPart);\n    if (joinPart && opts?.defaultDbKey) {\n        const joinClauses = parseJoinClauses(joinPart);\n        const relationsEngine = new JoinToRelationsEngine(opts.defaultDbKey, opts.tableDbMap);\n        const relations = relationsEngine.buildRelations(joinClauses, collection);\n        const path = [opts.defaultDbKey, collection];\n        return parseReturn(\"relation-find\", [path, whereClause, relations, findOpts]);\n    }\n    return parseReturn(\"find\", [collection, whereClause, {}, findOpts]);\n}\nexport function parseJoinClauses(joinPart) {\n    const joinClauses = {};\n    const joinRegex = /\\s+JOIN\\s+([\\w\\/]+)(?:\\s+AS\\s+)?([\\w\\/]+)?\\s+ON\\s+([^\\s]+)\\s*=\\s*([^\\s]+)/gi;\n    let match;\n    while ((match = joinRegex.exec(joinPart)) !== null) {\n        const table = match[1];\n        const alias = match[2] || table;\n        const condition = `${match[3]} = ${match[4]}`;\n        joinClauses[alias] = condition;\n    }\n    return joinClauses;\n}\nexport function parseSelectClause(selectClause) {\n    selectClause = selectClause.trim();\n    if (selectClause === \"*\")\n        return {};\n    const excludeMatch = selectClause.match(/\\*\\s+EXCLUDE\\s+(.+)/i);\n    if (excludeMatch) {\n        return {\n            exclude: excludeMatch[1].split(/\\s*,\\s*/),\n        };\n    }\n    return {\n        select: selectClause.split(/\\s*,\\s*/),\n    };\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NxbC9oYW5kbGUvc2VsZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDekMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLFlBQVksQ0FBQztBQUV4QyxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUU5RCxNQUFNLFVBQVUsWUFBWSxDQUN4QixLQUFhLEVBQ2IsSUFBVztJQUVYLElBQUksY0FBa0MsQ0FBQztJQUN2QyxJQUFJLGFBQWEsR0FBRyxLQUFLLENBQUM7SUFFMUIsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUM5RCxJQUFJLFVBQVUsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3BCLGNBQWMsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUN4RCxhQUFhLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUVELE1BQU0sS0FBSyxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUMsd0RBQXdELENBQUMsQ0FBQztJQUM1RixJQUFJLENBQUMsS0FBSztRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUVyRCxNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDcEMsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzVCLE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDaEMsTUFBTSxXQUFXLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUVyRSxNQUFNLFFBQVEsR0FBRyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUVoRCxJQUFJLFFBQVEsSUFBSSxJQUFJLEVBQUUsWUFBWSxFQUFFLENBQUM7UUFDakMsTUFBTSxXQUFXLEdBQUcsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDL0MsTUFBTSxlQUFlLEdBQUcsSUFBSSxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN0RixNQUFNLFNBQVMsR0FBRyxlQUFlLENBQUMsY0FBYyxDQUFDLFdBQVcsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUMxRSxNQUFNLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDN0MsT0FBTyxXQUFXLENBQUMsZUFBZSxFQUFFLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUNsRixDQUFDO0lBRUQsT0FBTyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsVUFBVSxFQUFFLFdBQVcsRUFBRSxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUN4RSxDQUFDO0FBRUQsTUFBTSxVQUFVLGdCQUFnQixDQUFDLFFBQWdCO0lBQzdDLE1BQU0sV0FBVyxHQUEyQixFQUFFLENBQUM7SUFDL0MsTUFBTSxTQUFTLEdBQUcsNkVBQTZFLENBQUM7SUFDaEcsSUFBSSxLQUFLLENBQUM7SUFDVixPQUFPLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQztRQUNqRCxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkIsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQztRQUNoQyxNQUFNLFNBQVMsR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUM5QyxXQUFXLENBQUMsS0FBSyxDQUFDLEdBQUcsU0FBUyxDQUFDO0lBQ25DLENBQUM7SUFDRCxPQUFPLFdBQVcsQ0FBQztBQUN2QixDQUFDO0FBRUQsTUFBTSxVQUFVLGlCQUFpQixDQUFDLFlBQW9CO0lBQ2xELFlBQVksR0FBRyxZQUFZLENBQUMsSUFBSSxFQUFFLENBQUM7SUFFbkMsSUFBSSxZQUFZLEtBQUssR0FBRztRQUFFLE9BQU8sRUFBRSxDQUFDO0lBRXBDLE1BQU0sWUFBWSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUNoRSxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ2YsT0FBTztZQUNILE9BQU8sRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQztTQUM1QyxDQUFDO0lBQ04sQ0FBQztJQUVELE9BQU87UUFDSCxNQUFNLEVBQUUsWUFBWSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUM7S0FDeEMsQ0FBQztBQUNOLENBQUMifQ==",
    "import { parseReturn, parseSet } from \"../../sql/utils.js\";\nimport { parseWhere } from \"../../sql/where.js\";\nexport function handleUpdate(query) {\n    const match = query.match(/UPDATE\\s+([\\w\\/]+)\\s+SET\\s+(.+)\\s+WHERE\\s+(.+)/i);\n    if (!match)\n        throw new Error(\"Invalid UPDATE syntax\");\n    const collection = match[1];\n    const setClause = parseSet(match[2]);\n    const whereClause = parseWhere(match[3]);\n    return parseReturn(\"update\", [collection, whereClause, setClause]);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXBkYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NxbC9oYW5kbGUvdXBkYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBQ25ELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFFeEMsTUFBTSxVQUFVLFlBQVksQ0FBQyxLQUFhO0lBQ3RDLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsaURBQWlELENBQUMsQ0FBQztJQUM3RSxJQUFJLENBQUMsS0FBSztRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUVyRCxNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDNUIsTUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3JDLE1BQU0sV0FBVyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUV6QyxPQUFPLFdBQVcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxVQUFVLEVBQUUsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUM7QUFDdkUsQ0FBQyJ9",
    "import { handleCreate, handleDrop, handleExists, handleGet } from \"./handle/collection.js\";\nimport { handleDelete } from \"./handle/delete.js\";\nimport { handleInsert } from \"./handle/insert.js\";\nimport { handleSelect } from \"./handle/select.js\";\nimport { handleUpdate } from \"./handle/update.js\";\nclass SQLParser {\n    parse(query, opts) {\n        query = query.replace(/\\s+/g, \" \").trim();\n        if (query.endsWith(\";\"))\n            query = query.slice(0, -1);\n        const tokens = query.split(/\\s+/);\n        const method = tokens[0].toUpperCase();\n        if (method === \"SELECT\") {\n            return handleSelect(query, opts);\n        }\n        else if (method === \"INSERT\") {\n            return handleInsert(query);\n        }\n        else if (method === \"UPDATE\") {\n            return handleUpdate(query);\n        }\n        else if (method === \"DELETE\") {\n            return handleDelete(query);\n        }\n        // collection\n        else if (method === \"GET\") {\n            return handleGet(query);\n        }\n        else if (method === \"CREATE\") {\n            return handleCreate(query);\n        }\n        else if (method === \"DROP\") {\n            return handleDrop(query);\n        }\n        else if (method === \"EXISTS\") {\n            return handleExists(query);\n        }\n        else {\n            throw new Error(\"Unknown query: \" + tokens[0]);\n        }\n    }\n}\nexport default SQLParser;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc3FsL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN4RixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDL0MsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFL0MsTUFBTSxTQUFTO0lBQ1gsS0FBSyxDQUNELEtBQWEsRUFDYixJQUFXO1FBRVgsS0FBSyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzFDLElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUM7WUFBRSxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwRCxNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2xDLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUV2QyxJQUFJLE1BQU0sS0FBSyxRQUFRLEVBQUUsQ0FBQztZQUN0QixPQUFPLFlBQVksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDckMsQ0FBQzthQUFNLElBQUksTUFBTSxLQUFLLFFBQVEsRUFBRSxDQUFDO1lBQzdCLE9BQU8sWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9CLENBQUM7YUFBTSxJQUFJLE1BQU0sS0FBSyxRQUFRLEVBQUUsQ0FBQztZQUM3QixPQUFPLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMvQixDQUFDO2FBQU0sSUFBSSxNQUFNLEtBQUssUUFBUSxFQUFFLENBQUM7WUFDN0IsT0FBTyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDL0IsQ0FBQztRQUNELGFBQWE7YUFDUixJQUFJLE1BQU0sS0FBSyxLQUFLLEVBQUUsQ0FBQztZQUN4QixPQUFPLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM1QixDQUFDO2FBQU0sSUFBSSxNQUFNLEtBQUssUUFBUSxFQUFFLENBQUM7WUFDN0IsT0FBTyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDL0IsQ0FBQzthQUFNLElBQUksTUFBTSxLQUFLLE1BQU0sRUFBRSxDQUFDO1lBQzNCLE9BQU8sVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzdCLENBQUM7YUFBTSxJQUFJLE1BQU0sS0FBSyxRQUFRLEVBQUUsQ0FBQztZQUM3QixPQUFPLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMvQixDQUFDO2FBQU0sQ0FBQztZQUNKLE1BQU0sSUFBSSxLQUFLLENBQUMsaUJBQWlCLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkQsQ0FBQztJQUNMLENBQUM7Q0FDSjtBQUVELGVBQWUsU0FBUyxDQUFDIn0=",
    "import { ValtheraQuery } from \"@wxn0brp/db-string-query/types\";\nimport { VQL_Query, VQL_Query_Relation } from \"@wxn0brp/vql-client/vql\";\n\nexport function convertDbToVql(res: ValtheraQuery, dbName: string): VQL_Query {\n    const { args, method } = res;\n    const collection = args[0];\n    const baseStructure = { db: dbName, d: {} };\n\n    const methodMap: { [key: string]: any } = {\n        find: {\n            options: args[2],\n            searchOpts: args[3]\n        },\n        findOne: {\n            searchOpts: args[2]\n        },\n        update: {\n            updater: args[2]\n        },\n        updateOne: {\n            updater: args[2]\n        },\n        add: {\n            data: args[1]\n        }\n    };\n\n    baseStructure.d = {\n        [method]: methodMap[method] || {}\n    };\n\n    baseStructure.d[method].collection = collection;\n    if (method !== \"add\") baseStructure.d[method].search = args[1];\n\n    return baseStructure as VQL_Query;\n}\n\nexport function convertRelationVql(res: ValtheraQuery): VQL_Query_Relation {\n    const { args } = res;\n    return {\n        r: {\n            path: args[0],\n            search: args[1],\n            relations: args[2],\n            options: args[3],\n            select: args[4],\n            many: true\n        }\n    }\n}\n",
    "export function flattenObject(obj: any, prefix: string = \"\"): string {\n    const pairs: string[] = [];\n\n    for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            const value = obj[key];\n            const fullKey = prefix ? `${prefix}.${key}` : key;\n\n            if (typeof value === \"object\" && value !== null && !Array.isArray(value)) {\n                pairs.push(...flattenObject(value, fullKey).split(\" \").filter(s => s.length > 0));\n            } else if (Array.isArray(value)) {\n                pairs.push(`${fullKey}=${JSON.stringify(value)}`);\n            } else {\n                pairs.push(`${fullKey}=${value}`);\n            }\n        }\n    }\n\n    return pairs.join(\" \");\n}\n\nexport function renameKeys(obj: any, oldKey: string, newKey: string): any {\n    if (!(oldKey in obj)) return;\n    obj[newKey] = obj[oldKey];\n    delete obj[oldKey];\n}",
    "import { VQL_Query } from \"@wxn0brp/vql-client/vql\";\nimport { flattenObject, renameKeys } from \"./utils\";\n\nexport function convert_VQLR_to_VQLS(res: VQL_Query) {\n    let string = \"\";\n    if (!(\"d\" in res)) {\n        return \"Relation cannot be converted to VQLS\";\n    }\n\n    const d = res.d;\n    const opName = Object.keys(d)[0];\n    const op = d[opName];\n    let collection = op.collection;\n    let baseOp = opName.replace(\"One\", \"\");\n\n    if (baseOp === \"find\") { }\n    else if (baseOp === \"update\") collection = \"~\" + collection;\n    else if (baseOp === \"remove\") collection = \"-\" + collection;\n    else if (baseOp === \"add\") collection = \"+\" + collection;\n    else if (opName === \"updateOneOrAdd\") collection = \"updateOneOrAdd \" + collection;\n\n    if (opName.endsWith(\"One\")) collection += \"!\";\n\n    delete op.collection;\n    renameKeys(op, \"search\", \"s\");\n    renameKeys(op, \"data\", \"d\");\n    renameKeys(op, \"options\", \"o\");\n    renameKeys(op, \"updater\", \"u\");\n    if (op.searchOpts?.select) {\n        op.select = op.searchOpts.select.reduce((obj: any, key: string) => {\n            obj[key] = 1;\n            return obj;\n        }, {});\n        delete op.searchOpts.select;\n    }\n    renameKeys(op, \"select\", \"e\");\n\n    const args = flattenObject(op);\n\n    string += `${res.db} ${collection} ${args}`;\n    return string;\n}",
    "import SQLParser from \"@wxn0brp/db-string-query/sql/index\";\nimport { VQLUQ } from \"@wxn0brp/vql-client/vql\";\nimport { convertDbToVql, convertRelationVql } from \"./dbToVQL\";\nimport { convert_VQLR_to_VQLS } from \"./VQLR_to_VQLS\";\nimport { ValtheraQuery } from \"@wxn0brp/db-string-query/types\";\n\nconst sqlParser = new SQLParser();\n\nexport interface SV_Ref {\n    dbData?: ValtheraQuery;\n}\n\nexport function SQL_TO_VQL(sql: string, dbName: string, string = false, ref: SV_Ref = {}): VQLUQ {\n    const dbData = sqlParser.parse(sql, { defaultDbKey: dbName });\n    ref.dbData = dbData;\n\n    const vqluq = dbData.method === \"relation-find\" ?\n        convertRelationVql(dbData) :\n        convertDbToVql(dbData, dbName);\n\n    return string ? convert_VQLR_to_VQLS(vqluq) : vqluq;\n}",
    "import { SQL_TO_VQL, SV_Ref } from \"#index\";\nimport { convert_VQLR_to_VQLS } from \"#VQLR_to_VQLS\";\n\nconst sqlInput = document.querySelector<HTMLTextAreaElement>(\"#sql-input\");\nconst dbNameInput = document.querySelector<HTMLInputElement>(\"#db-name\");\nconst translateBtn = document.querySelector<HTMLButtonElement>(\"#translate-btn\");\nconst vqlObjectOutput = document.querySelector<HTMLPreElement>(\"#vql-object\");\nconst vqlStringOutput = document.querySelector<HTMLPreElement>(\"#vql-string\");\nconst copyVqlBtn = document.querySelector<HTMLButtonElement>(\"#copy-vql\");\nconst copyStringBtn = document.querySelector<HTMLButtonElement>(\"#copy-string\");\nconst outputCard = document.querySelector<HTMLDivElement>(\"#output-card\");\n\nlet _vqlObject: string = \"\";\nlet _vqlString: string = \"\";\n\nconst tabLinks = document.querySelectorAll<HTMLButtonElement>(\".tab-link\");\nconst tabPanes = document.querySelectorAll<HTMLDivElement>(\".tab-pane\");\n\ntabLinks.forEach(link => {\n    link.addEventListener(\"click\", () => {\n        tabLinks.forEach(l => l.classList.remove(\"active\"));\n        tabPanes.forEach(p => p.classList.remove(\"active\"));\n\n        link.classList.add(\"active\");\n        const targetTab = document.querySelector(`#${link.dataset.tab}`);\n        if (targetTab)\n            targetTab.classList.add(\"active\");\n    });\n});\n\nfunction translate() {\n    const sql = sqlInput.value.trim();\n    const dbName = dbNameInput.value.trim() || \"db1\";\n\n    if (!sql) {\n        vqlObjectOutput.textContent = \"Please enter a SQL query.\";\n        vqlStringOutput.textContent = \"\";\n        outputCard.classList.add(\"hidden\");\n        return;\n    }\n\n    try {\n        const ref: SV_Ref = {};\n        const vqlObject = SQL_TO_VQL(sql, dbName, false, ref) as any;\n        console.log(ref);\n        console.log(vqlObject);\n\n        _vqlObject = JSON.stringify(vqlObject, null, 2);\n        vqlObjectOutput.textContent = _vqlObject;\n\n        const vqlString = convert_VQLR_to_VQLS(vqlObject);\n        _vqlString = vqlString;\n        vqlStringOutput.textContent = _vqlString;\n        console.log(vqlString);\n        console.log(\"----\");\n\n        outputCard.classList.remove(\"hidden\");\n    } catch (error) {\n        console.error(\"Translation error:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"An unknown error occurred.\";\n        _vqlObject = `Error: ${errorMessage}`;\n        _vqlString = `Error: ${errorMessage}`;\n        vqlObjectOutput.textContent = _vqlObject;\n        vqlStringOutput.textContent = _vqlString;\n        outputCard.classList.remove(\"hidden\");\n    }\n}\n\ntranslateBtn.addEventListener(\"click\", translate);\n\nfunction enter(e: KeyboardEvent) {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault();\n        translateBtn.click();\n    }\n}\n\nsqlInput.addEventListener(\"keydown\", enter);\ndbNameInput.addEventListener(\"keydown\", enter);\n\nlet tooltipTimeout: any;\nfunction showCopyFeedback(button: HTMLButtonElement) {\n    const resultBox = button.closest(\".result-box\");\n    if (!resultBox) return;\n\n    const tooltip = resultBox.querySelector<HTMLDivElement>(\".copy-tooltip\");\n    if (!tooltip) return;\n\n    clearTimeout(tooltipTimeout);\n    tooltip.classList.add(\"visible\");\n    tooltipTimeout = setTimeout(() => {\n        tooltip.classList.remove(\"visible\");\n    }, 1500);\n}\n\ncopyVqlBtn.addEventListener(\"click\", () => {\n    if (!_vqlObject) return;\n    navigator.clipboard.writeText(_vqlObject);\n    showCopyFeedback(copyVqlBtn);\n\n});\n\ncopyStringBtn.addEventListener(\"click\", () => {\n    if (!_vqlString) return;\n    navigator.clipboard.writeText(_vqlString);\n    showCopyFeedback(copyStringBtn);\n});\n\ntranslate();"
  ],
  "mappings": "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",
  "debugId": "41AE7A7008939A1264756E2164756E21",
  "names": []
}